!function(n){n("a[data-reveal-id]").live("click",function(a){a.preventDefault();var e=n(this).attr("data-reveal-id");n("#"+e).reveal(n(this).data())}),n.fn.reveal=function(a){var e={animation:"fadeAndPop",animationspeed:300,closeonbackgroundclick:!0,dismissmodalclass:"close-reveal-modal"},a=n.extend({},e,a);return this.each(function(){function e(){c=!1}function i(){c=!0}var o=n(this),t=parseInt(o.css("top")),s=o.height()+t,c=!1,d=n(".reveal-modal-bg");0==d.length&&(d=n('<div class="reveal-modal-bg" />').insertAfter(o)),o.bind("reveal:open",function(){d.unbind("click.modalEvent"),n("."+a.dismissmodalclass).unbind("click.modalEvent"),c||(i(),"fadeAndPop"==a.animation&&(o.css({top:n(document).scrollTop()-s,opacity:0,display:"block"}),d.fadeIn(a.animationspeed/2),o.delay(a.animationspeed/2).animate({top:n(document).scrollTop()+t+"px",opacity:1},a.animationspeed,e())),"fade"==a.animation&&(o.css({opacity:0,display:"block",top:n(document).scrollTop()+t}),d.fadeIn(a.animationspeed/2),o.delay(a.animationspeed/2).animate({opacity:1},a.animationspeed,e())),"none"==a.animation&&(o.css({display:"block",top:n(document).scrollTop()+t}),d.css({display:"block"}),e())),o.unbind("reveal:open")}),o.bind("reveal:close",function(){c||(i(),"fadeAndPop"==a.animation&&(d.delay(a.animationspeed).fadeOut(a.animationspeed),o.animate({top:n(document).scrollTop()-s+"px",opacity:0},a.animationspeed/2,function(){o.css({top:t,opacity:1,display:"none"}),e()})),"fade"==a.animation&&(d.delay(a.animationspeed).fadeOut(a.animationspeed),o.animate({opacity:0},a.animationspeed,function(){o.css({opacity:1,display:"none",top:t}),e()})),"none"==a.animation&&(o.css({display:"none",top:t}),d.css({display:"none"}))),o.unbind("reveal:close")}),o.trigger("reveal:open");n("."+a.dismissmodalclass).bind("click.modalEvent",function(){o.trigger("reveal:close")});a.closeonbackgroundclick&&(d.css({cursor:"pointer"}),d.bind("click.modalEvent",function(){o.trigger("reveal:close")})),n("body").keyup(function(n){27===n.which&&o.trigger("reveal:close")})})}}(jQuery);